# 基于Vue3的组件封装技巧分享
- URL: https://mp.weixin.qq.com/s/JzbPcYAMYpJvZnjAXbeaYA
- Added At: 2024-10-11 07:44:35
- [Link To Text](2024-10-11-基于vue3的组件封装技巧分享_raw.md)

## TL;DR
文章分享了基于Vue3的组件封装技巧，通过使用`$attrs`和`$slots`实现UI组件库组件的个性化封装，避免代码冗余，并提供了显隐控制的优化建议。

## Summary
1. **文章概述**：
   - 作者分享了基于Vue3的组件封装技巧，主要针对UI组件库中的组件进行二次封装，以实现更好的个性化和灵活扩展。
   - 核心知识点包括`$attrs`和`$slots`的使用。

2. **需求背景**：
   - **日常开发**：使用UI组件库（如Ant Design Vue、Element Plus）提升开发效率。
   - **个性化需求**：项目中需要对组件进行个性化封装，以满足大量使用的需求。

3. **错误示范**：
   - **自定义Modal组件**：基于`a-modal`封装，修改样式、按钮样式、关闭后销毁、渲染到指定元素等。
   - **问题**：每次有新需求时，需要频繁修改组件，导致代码冗余。

4. **$attrs的使用**：
   - **问题**：如何将传入的属性自动绑定到`a-modal`。
   - **解决方案**：使用`$attrs`属性，自动绑定父组件传递的属性，避免手动添加每个属性。
   - **注意事项**：`$attrs`不包括已写入props的值，且style和class会默认绑定至根元素。

5. **$slots的使用**：
   - **问题**：如何处理插槽，避免频繁修改自定义组件。
   - **解决方案**：使用`$slots`动态绑定插槽，遍历`$slots`中的值，动态绑定插槽。
   - **实现方式**：通过`v-for`遍历`$slots`，动态绑定插槽名称和参数。

6. **优化建议**：
   - **显隐控制**：使用`v-model`控制组件的显示隐藏，简化代码。
   - **代码示例**：展示如何通过`v-model`和`watch`实现组件的显隐控制。

7. **总结**：
   - **适用范围**：本文的封装方式适用于Vue3，不局限于特定UI组件库。
   - **推荐阅读**：提供了几篇相关文章的链接，供进一步学习。
